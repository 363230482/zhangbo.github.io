# 分布式系统演进

## 单体服务
所有的服务都在一个大的应用中，无需服务注册与发现/配置中心/RPC/链路跟踪等分布式问题。

但单体应用太复杂，一个微小的改动，都要导致整个应用重启，耗费资源巨大，开发发布不灵活等问题。

## 传统的分布式应用
只是将单体应用拆分为多个服务，服务间调用通常采用HTTP协议，应用中直接配置依赖方的接口地址，
该接口地址并不是真正的服务URL，而是一个反向代理/负载均衡服务(Nginx),由Nginx来做负载均衡。
淘宝的Tengine支持服务健康检查模块，可做到服务的动态上下线。

但该模式下，服务还是不能动态的扩容缩容，动态注册发现等，加上链路跟踪等问题，依然无法解决。
`负载均衡依赖接口方的反向代理服务器(Nginx)`

## 微服务架构
现在的SpringCloud全家桶，包含了服务注册发现，动态配置中心，RPC调用，负载均衡，链路跟踪，熔断限流等组件，
可以很好的完成服务调用，让我们专注于业务逻辑的开发。

但它的服务注册发现，限流熔断，链路跟踪等于业务关系不是很大的模块，依然需要程序员集成到我们的应用中，增加了开发和学习成本。
而且因为这些附属功能需要集成到业务应用中，它就不能很好的跨语言。
`负载均衡一般在调用方做(Dubbo和Feign的Robbion)`

## Service Mesh
在微服务的基础上，将服务注册发现，熔断限流，链路跟踪等基础设施，在拆分出来为独立的服务，与业务应用部署在同一主机上作为服务的代理，
即sidecar模式，让程序员更加专注于业务逻辑，无需关系服务注册发现等问题。而且sidecar可以做到语言无关，更加通用。

这种模式，增加了一层网络开销，且需要多部署一个代理程序，理论上增加了运维难度和响应时间。
`负载均衡有sidecar代理实现`